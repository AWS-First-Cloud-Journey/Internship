{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project\\\\frontend\\\\src\\\\components\\\\Messages.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Messages = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [conversations, setConversations] = useState([]);\n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [replyTo, setReplyTo] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    fetchConversations();\n  }, []);\n  useEffect(() => {\n    if (selectedConversation) {\n      fetchMessages(selectedConversation.id);\n      markMessagesAsRead(selectedConversation.id);\n      const interval = setInterval(() => {\n        fetchMessages(selectedConversation.id);\n        markMessagesAsRead(selectedConversation.id);\n      }, 3000);\n      return () => clearInterval(interval);\n    }\n  }, [selectedConversation]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const fetchConversations = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/conversations', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setConversations(response.data);\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMessages = async conversationId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`/api/conversations/${conversationId}/messages`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const markMessagesAsRead = async conversationId => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(`/api/conversations/${conversationId}/mark-read`, {}, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      // Trigger navbar count update\n      window.dispatchEvent(new Event('messageCountUpdate'));\n    } catch (error) {\n      console.error('Error marking messages as read:', error);\n    }\n  };\n  const sendMessage = async e => {\n    var _fileInputRef$current;\n    e.preventDefault();\n    if (!newMessage.trim() && !((_fileInputRef$current = fileInputRef.current) !== null && _fileInputRef$current !== void 0 && _fileInputRef$current.files[0])) return;\n    try {\n      var _fileInputRef$current2;\n      const token = localStorage.getItem('token');\n      const formData = new FormData();\n      if ((_fileInputRef$current2 = fileInputRef.current) !== null && _fileInputRef$current2 !== void 0 && _fileInputRef$current2.files[0]) {\n        formData.append('file', fileInputRef.current.files[0]);\n        formData.append('message_type', 'image');\n      } else {\n        formData.append('message_type', 'text');\n      }\n      formData.append('content', newMessage);\n      if (replyTo) {\n        formData.append('reply_to_id', replyTo.id);\n      }\n      await axios.post(`/api/conversations/${selectedConversation.id}/messages`, formData, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setNewMessage('');\n      setReplyTo(null);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n      fetchMessages(selectedConversation.id);\n      // Trigger navbar count update\n      window.dispatchEvent(new Event('messageCountUpdate'));\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  const editMessage = async (messageId, newContent) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put(`/api/messages/${messageId}`, {\n        content: newContent\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      fetchMessages(selectedConversation.id);\n    } catch (error) {\n      console.error('Error editing message:', error);\n    }\n  };\n  const deleteMessage = async messageId => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.delete(`/api/messages/${messageId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      fetchMessages(selectedConversation.id);\n    } catch (error) {\n      console.error('Error deleting message:', error);\n    }\n  };\n  const shareLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(async position => {\n        try {\n          const token = localStorage.getItem('token');\n          await axios.post(`/api/conversations/${selectedConversation.id}/messages`, {\n            message_type: 'location',\n            location_lat: position.coords.latitude,\n            location_lng: position.coords.longitude,\n            location_name: 'Current Location'\n          }, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          fetchMessages(selectedConversation.id);\n        } catch (error) {\n          console.error('Error sharing location:', error);\n        }\n      });\n    }\n  };\n  const MessageBubble = ({\n    message,\n    isOwn\n  }) => {\n    _s();\n    const [isEditing, setIsEditing] = useState(false);\n    const [editContent, setEditContent] = useState(message.content);\n    const currentUser = JSON.parse(localStorage.getItem('user'));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: isOwn ? 'flex-end' : 'flex-start',\n        marginBottom: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: '70%',\n          background: isOwn ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#f1f1f1',\n          color: isOwn ? 'white' : 'black',\n          padding: '0.75rem 1rem',\n          borderRadius: '18px',\n          position: 'relative'\n        },\n        children: [message.reply_to && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(0,0,0,0.1)',\n            padding: '0.5rem',\n            borderRadius: '8px',\n            marginBottom: '0.5rem',\n            fontSize: '0.8rem',\n            borderLeft: '3px solid rgba(255,255,255,0.5)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [message.reply_to.sender_username, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: message.reply_to.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this), message.message_type === 'image' && message.file_url && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `/api/uploads/${message.file_url}`,\n          alt: \"Shared image\",\n          style: {\n            maxWidth: '200px',\n            borderRadius: '8px',\n            marginBottom: '0.5rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), message.message_type === 'location' && message.location && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '0.5rem'\n          },\n          children: [\"\\uD83D\\uDCCD \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: message.location.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [\"Lat: \", message.location.lat, \", Lng: \", message.location.lng]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: editContent,\n            onChange: e => setEditContent(e.target.value),\n            style: {\n              width: '100%',\n              padding: '0.25rem',\n              marginBottom: '0.5rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                editMessage(message.id, editContent);\n                setIsEditing(false);\n              },\n              style: {\n                marginRight: '0.5rem',\n                fontSize: '0.7rem'\n              },\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIsEditing(false),\n              style: {\n                fontSize: '0.7rem'\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [message.content, message.is_edited && /*#__PURE__*/_jsxDEV(\"small\", {\n            style: {\n              opacity: 0.7\n            },\n            children: \" (edited)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.7rem',\n            opacity: 0.7,\n            marginTop: '0.25rem'\n          },\n          children: new Date(message.created_at).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), isOwn && message.sender_id === currentUser.id && !message.is_deleted && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '-10px',\n            right: '0',\n            display: 'none'\n          },\n          className: \"message-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setReplyTo(message),\n            style: {\n              fontSize: '0.6rem',\n              margin: '0 2px'\n            },\n            children: \"Reply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsEditing(true),\n            style: {\n              fontSize: '0.6rem',\n              margin: '0 2px'\n            },\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteMessage(message.id),\n            style: {\n              fontSize: '0.6rem',\n              margin: '0 2px'\n            },\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this);\n  };\n  _s(MessageBubble, \"DpywK8biuty2ZFnG3bN/3+ipFiE=\");\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center',\n      padding: '2rem'\n    },\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: '1200px',\n      margin: '0 auto',\n      padding: '2rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginBottom: '3rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        style: {\n          color: 'white',\n          textDecoration: 'none',\n          padding: '0.75rem 1.5rem',\n          background: 'linear-gradient(135deg, #ff6b6b 0%, #feca57 100%)',\n          borderRadius: '12px',\n          fontWeight: '500',\n          transition: 'all 0.3s ease',\n          marginRight: '2rem',\n          boxShadow: '0 4px 15px rgba(255, 107, 107, 0.4)'\n        },\n        children: \"\\u2190 Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: '2.5rem',\n          fontWeight: '700',\n          background: 'linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3)',\n          WebkitBackgroundClip: 'text',\n          WebkitTextFillColor: 'transparent',\n          backgroundSize: '400% 400%',\n          animation: 'rainbow 3s ease-in-out infinite'\n        },\n        children: \"Messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        height: '600px',\n        background: 'rgba(255, 255, 255, 0.95)',\n        borderRadius: '16px',\n        overflow: 'hidden'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '300px',\n          borderRight: '1px solid #eee',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '1rem',\n            borderBottom: '1px solid #eee'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Conversations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), conversations.map(conv => {\n          var _conv$last_message$co;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => setSelectedConversation(conv),\n            style: {\n              padding: '1rem',\n              borderBottom: '1px solid #f0f0f0',\n              cursor: 'pointer',\n              background: (selectedConversation === null || selectedConversation === void 0 ? void 0 : selectedConversation.id) === conv.id ? '#f0f8ff' : 'transparent',\n              position: 'relative'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: conv.unread_count > 0 ? 'bold' : 'normal'\n                },\n                children: conv.other_user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), conv.unread_count > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  backgroundColor: '#e74c3c',\n                  color: 'white',\n                  borderRadius: '50%',\n                  width: '20px',\n                  height: '20px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '0.7rem',\n                  fontWeight: 'bold'\n                },\n                children: conv.unread_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), conv.item && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: '#666'\n              },\n              children: [\"About: \", conv.item.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 29\n            }, this), conv.last_message && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: conv.unread_count > 0 ? '#333' : '#999',\n                marginTop: '0.25rem',\n                fontWeight: conv.unread_count > 0 ? '500' : 'normal'\n              },\n              children: [(_conv$last_message$co = conv.last_message.content) === null || _conv$last_message$co === void 0 ? void 0 : _conv$last_message$co.substring(0, 50), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this)]\n          }, conv.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: selectedConversation ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '1rem',\n              borderBottom: '1px solid #eee',\n              background: '#f8f9fa'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: selectedConversation.other_user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), selectedConversation.item && /*#__PURE__*/_jsxDEV(\"small\", {\n              children: [\"Discussing: \", selectedConversation.item.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              padding: '1rem',\n              overflow: 'auto'\n            },\n            children: [messages.map(message => /*#__PURE__*/_jsxDEV(MessageBubble, {\n              message: message,\n              isOwn: message.sender_id === JSON.parse(localStorage.getItem('user')).id\n            }, message.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this), replyTo && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '0.5rem 1rem',\n              background: '#f0f8ff',\n              borderTop: '1px solid #eee'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              children: [\"Replying to: \", replyTo.content]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setReplyTo(null),\n              style: {\n                float: 'right',\n                background: 'none',\n                border: 'none'\n              },\n              children: \"\\u2715\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: sendMessage,\n            style: {\n              padding: '1rem',\n              borderTop: '1px solid #eee',\n              display: 'flex',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              accept: \"image/*\",\n              style: {\n                display: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                var _fileInputRef$current3;\n                return (_fileInputRef$current3 = fileInputRef.current) === null || _fileInputRef$current3 === void 0 ? void 0 : _fileInputRef$current3.click();\n              },\n              style: {\n                padding: '0.5rem'\n              },\n              children: \"\\uD83D\\uDCF7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: shareLocation,\n              style: {\n                padding: '0.5rem'\n              },\n              children: \"\\uD83D\\uDCCD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: newMessage,\n              onChange: e => setNewMessage(e.target.value),\n              placeholder: \"Type a message...\",\n              style: {\n                flex: 1,\n                padding: '0.75rem',\n                border: '1px solid #ddd',\n                borderRadius: '20px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              style: {\n                padding: '0.5rem 1rem',\n                background: '#007bff',\n                color: 'white',\n                border: 'none',\n                borderRadius: '20px'\n              },\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select a conversation to start messaging\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .message-actions {\n          display: none;\n        }\n        div:hover .message-actions {\n          display: block;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 5\n  }, this);\n};\n_s2(Messages, \"yXrk4tGg64hus2XHxprEFi3RKJ4=\");\n_c = Messages;\nexport default Messages;\nvar _c;\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Messages","_s2","_s","$RefreshSig$","conversations","setConversations","selectedConversation","setSelectedConversation","messages","setMessages","newMessage","setNewMessage","replyTo","setReplyTo","loading","setLoading","messagesEndRef","fileInputRef","fetchConversations","fetchMessages","id","markMessagesAsRead","interval","setInterval","clearInterval","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","token","localStorage","getItem","response","get","headers","data","error","console","conversationId","post","window","dispatchEvent","Event","sendMessage","e","_fileInputRef$current","preventDefault","trim","files","_fileInputRef$current2","formData","FormData","append","value","editMessage","messageId","newContent","put","content","deleteMessage","delete","shareLocation","navigator","geolocation","getCurrentPosition","position","message_type","location_lat","coords","latitude","location_lng","longitude","location_name","MessageBubble","message","isOwn","isEditing","setIsEditing","editContent","setEditContent","currentUser","JSON","parse","style","display","justifyContent","marginBottom","children","maxWidth","background","color","padding","borderRadius","reply_to","fontSize","borderLeft","sender_username","fileName","_jsxFileName","lineNumber","columnNumber","file_url","src","alt","location","name","lat","lng","onChange","target","width","onClick","marginRight","is_edited","opacity","marginTop","Date","created_at","toLocaleTimeString","sender_id","is_deleted","top","right","className","margin","textAlign","alignItems","to","textDecoration","fontWeight","transition","boxShadow","WebkitBackgroundClip","WebkitTextFillColor","backgroundSize","animation","height","overflow","borderRight","borderBottom","map","conv","_conv$last_message$co","cursor","unread_count","other_user","username","backgroundColor","item","last_message","substring","flex","flexDirection","ref","borderTop","float","border","onSubmit","gap","type","accept","_fileInputRef$current3","click","placeholder","jsx","_c","$RefreshReg$"],"sources":["D:/Project/frontend/src/components/Messages.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Messages = () => {\n  const [conversations, setConversations] = useState([]);\n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [replyTo, setReplyTo] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  useEffect(() => {\n    fetchConversations();\n  }, []);\n\n  useEffect(() => {\n    if (selectedConversation) {\n      fetchMessages(selectedConversation.id);\n      markMessagesAsRead(selectedConversation.id);\n      const interval = setInterval(() => {\n        fetchMessages(selectedConversation.id);\n        markMessagesAsRead(selectedConversation.id);\n      }, 3000);\n      return () => clearInterval(interval);\n    }\n  }, [selectedConversation]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const fetchConversations = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/conversations', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      setConversations(response.data);\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMessages = async (conversationId) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`/api/conversations/${conversationId}/messages`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  \n  const markMessagesAsRead = async (conversationId) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(`/api/conversations/${conversationId}/mark-read`, {}, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      // Trigger navbar count update\n      window.dispatchEvent(new Event('messageCountUpdate'));\n    } catch (error) {\n      console.error('Error marking messages as read:', error);\n    }\n  };\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim() && !fileInputRef.current?.files[0]) return;\n\n    try {\n      const token = localStorage.getItem('token');\n      const formData = new FormData();\n      \n      if (fileInputRef.current?.files[0]) {\n        formData.append('file', fileInputRef.current.files[0]);\n        formData.append('message_type', 'image');\n      } else {\n        formData.append('message_type', 'text');\n      }\n      \n      formData.append('content', newMessage);\n      if (replyTo) {\n        formData.append('reply_to_id', replyTo.id);\n      }\n\n      await axios.post(`/api/conversations/${selectedConversation.id}/messages`, formData, {\n        headers: { \n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      setNewMessage('');\n      setReplyTo(null);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n      fetchMessages(selectedConversation.id);\n      // Trigger navbar count update\n      window.dispatchEvent(new Event('messageCountUpdate'));\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n\n  const editMessage = async (messageId, newContent) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put(`/api/messages/${messageId}`, \n        { content: newContent },\n        { headers: { 'Authorization': `Bearer ${token}` } }\n      );\n      fetchMessages(selectedConversation.id);\n    } catch (error) {\n      console.error('Error editing message:', error);\n    }\n  };\n\n  const deleteMessage = async (messageId) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.delete(`/api/messages/${messageId}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      fetchMessages(selectedConversation.id);\n    } catch (error) {\n      console.error('Error deleting message:', error);\n    }\n  };\n\n  const shareLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(async (position) => {\n        try {\n          const token = localStorage.getItem('token');\n          await axios.post(`/api/conversations/${selectedConversation.id}/messages`, {\n            message_type: 'location',\n            location_lat: position.coords.latitude,\n            location_lng: position.coords.longitude,\n            location_name: 'Current Location'\n          }, {\n            headers: { 'Authorization': `Bearer ${token}` }\n          });\n          fetchMessages(selectedConversation.id);\n        } catch (error) {\n          console.error('Error sharing location:', error);\n        }\n      });\n    }\n  };\n\n  const MessageBubble = ({ message, isOwn }) => {\n    const [isEditing, setIsEditing] = useState(false);\n    const [editContent, setEditContent] = useState(message.content);\n    const currentUser = JSON.parse(localStorage.getItem('user'));\n\n    return (\n      <div style={{\n        display: 'flex',\n        justifyContent: isOwn ? 'flex-end' : 'flex-start',\n        marginBottom: '1rem'\n      }}>\n        <div style={{\n          maxWidth: '70%',\n          background: isOwn ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#f1f1f1',\n          color: isOwn ? 'white' : 'black',\n          padding: '0.75rem 1rem',\n          borderRadius: '18px',\n          position: 'relative'\n        }}>\n          {message.reply_to && (\n            <div style={{\n              background: 'rgba(0,0,0,0.1)',\n              padding: '0.5rem',\n              borderRadius: '8px',\n              marginBottom: '0.5rem',\n              fontSize: '0.8rem',\n              borderLeft: '3px solid rgba(255,255,255,0.5)'\n            }}>\n              <strong>{message.reply_to.sender_username}:</strong>\n              <div>{message.reply_to.content}</div>\n            </div>\n          )}\n\n          {message.message_type === 'image' && message.file_url && (\n            <img \n              src={`/api/uploads/${message.file_url}`}\n              alt=\"Shared image\"\n              style={{ maxWidth: '200px', borderRadius: '8px', marginBottom: '0.5rem' }}\n            />\n          )}\n\n          {message.message_type === 'location' && message.location && (\n            <div style={{ marginBottom: '0.5rem' }}>\n              üìç <strong>{message.location.name}</strong>\n              <br />\n              <small>Lat: {message.location.lat}, Lng: {message.location.lng}</small>\n            </div>\n          )}\n\n          {isEditing ? (\n            <div>\n              <input\n                value={editContent}\n                onChange={(e) => setEditContent(e.target.value)}\n                style={{ width: '100%', padding: '0.25rem', marginBottom: '0.5rem' }}\n              />\n              <div>\n                <button onClick={() => {\n                  editMessage(message.id, editContent);\n                  setIsEditing(false);\n                }} style={{ marginRight: '0.5rem', fontSize: '0.7rem' }}>Save</button>\n                <button onClick={() => setIsEditing(false)} style={{ fontSize: '0.7rem' }}>Cancel</button>\n              </div>\n            </div>\n          ) : (\n            <div>\n              {message.content}\n              {message.is_edited && <small style={{ opacity: 0.7 }}> (edited)</small>}\n            </div>\n          )}\n\n          <div style={{ fontSize: '0.7rem', opacity: 0.7, marginTop: '0.25rem' }}>\n            {new Date(message.created_at).toLocaleTimeString()}\n          </div>\n\n          {isOwn && message.sender_id === currentUser.id && !message.is_deleted && (\n            <div style={{ position: 'absolute', top: '-10px', right: '0', display: 'none' }} \n                 className=\"message-actions\">\n              <button onClick={() => setReplyTo(message)} style={{ fontSize: '0.6rem', margin: '0 2px' }}>Reply</button>\n              <button onClick={() => setIsEditing(true)} style={{ fontSize: '0.6rem', margin: '0 2px' }}>Edit</button>\n              <button onClick={() => deleteMessage(message.id)} style={{ fontSize: '0.6rem', margin: '0 2px' }}>Delete</button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  if (loading) return <div style={{ textAlign: 'center', padding: '2rem' }}>Loading...</div>;\n\n  return (\n    <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem' }}>\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: '3rem' }}>\n        <Link to=\"/\" style={{\n          color: 'white',\n          textDecoration: 'none',\n          padding: '0.75rem 1.5rem',\n          background: 'linear-gradient(135deg, #ff6b6b 0%, #feca57 100%)',\n          borderRadius: '12px',\n          fontWeight: '500',\n          transition: 'all 0.3s ease',\n          marginRight: '2rem',\n          boxShadow: '0 4px 15px rgba(255, 107, 107, 0.4)'\n        }}>‚Üê Home</Link>\n        <h2 style={{ \n          fontSize: '2.5rem',\n          fontWeight: '700',\n          background: 'linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3)',\n          WebkitBackgroundClip: 'text',\n          WebkitTextFillColor: 'transparent',\n          backgroundSize: '400% 400%',\n          animation: 'rainbow 3s ease-in-out infinite'\n        }}>Messages</h2>\n      </div>\n\n      <div style={{ display: 'flex', height: '600px', background: 'rgba(255, 255, 255, 0.95)', borderRadius: '16px', overflow: 'hidden' }}>\n        {/* Conversations List */}\n        <div style={{ width: '300px', borderRight: '1px solid #eee', overflow: 'auto' }}>\n          <div style={{ padding: '1rem', borderBottom: '1px solid #eee' }}>\n            <h3>Conversations</h3>\n          </div>\n          {conversations.map(conv => (\n            <div\n              key={conv.id}\n              onClick={() => setSelectedConversation(conv)}\n              style={{\n                padding: '1rem',\n                borderBottom: '1px solid #f0f0f0',\n                cursor: 'pointer',\n                background: selectedConversation?.id === conv.id ? '#f0f8ff' : 'transparent',\n                position: 'relative'\n              }}\n            >\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <div style={{ fontWeight: conv.unread_count > 0 ? 'bold' : 'normal' }}>\n                  {conv.other_user.username}\n                </div>\n                {conv.unread_count > 0 && (\n                  <span style={{\n                    backgroundColor: '#e74c3c',\n                    color: 'white',\n                    borderRadius: '50%',\n                    width: '20px',\n                    height: '20px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: '0.7rem',\n                    fontWeight: 'bold'\n                  }}>\n                    {conv.unread_count}\n                  </span>\n                )}\n              </div>\n              {conv.item && <div style={{ fontSize: '0.8rem', color: '#666' }}>About: {conv.item.name}</div>}\n              {conv.last_message && (\n                <div style={{ \n                  fontSize: '0.8rem', \n                  color: conv.unread_count > 0 ? '#333' : '#999', \n                  marginTop: '0.25rem',\n                  fontWeight: conv.unread_count > 0 ? '500' : 'normal'\n                }}>\n                  {conv.last_message.content?.substring(0, 50)}...\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {/* Messages Area */}\n        <div style={{ flex: 1, display: 'flex', flexDirection: 'column' }}>\n          {selectedConversation ? (\n            <>\n              {/* Header */}\n              <div style={{ padding: '1rem', borderBottom: '1px solid #eee', background: '#f8f9fa' }}>\n                <h4>{selectedConversation.other_user.username}</h4>\n                {selectedConversation.item && (\n                  <small>Discussing: {selectedConversation.item.name}</small>\n                )}\n              </div>\n\n              {/* Messages */}\n              <div style={{ flex: 1, padding: '1rem', overflow: 'auto' }}>\n                {messages.map(message => (\n                  <MessageBubble \n                    key={message.id} \n                    message={message} \n                    isOwn={message.sender_id === JSON.parse(localStorage.getItem('user')).id}\n                  />\n                ))}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Reply Preview */}\n              {replyTo && (\n                <div style={{ padding: '0.5rem 1rem', background: '#f0f8ff', borderTop: '1px solid #eee' }}>\n                  <small>Replying to: {replyTo.content}</small>\n                  <button onClick={() => setReplyTo(null)} style={{ float: 'right', background: 'none', border: 'none' }}>‚úï</button>\n                </div>\n              )}\n\n              {/* Input Area */}\n              <form onSubmit={sendMessage} style={{ padding: '1rem', borderTop: '1px solid #eee', display: 'flex', gap: '0.5rem' }}>\n                <input\n                  type=\"file\"\n                  ref={fileInputRef}\n                  accept=\"image/*\"\n                  style={{ display: 'none' }}\n                />\n                <button type=\"button\" onClick={() => fileInputRef.current?.click()} style={{ padding: '0.5rem' }}>üì∑</button>\n                <button type=\"button\" onClick={shareLocation} style={{ padding: '0.5rem' }}>üìç</button>\n                <input\n                  type=\"text\"\n                  value={newMessage}\n                  onChange={(e) => setNewMessage(e.target.value)}\n                  placeholder=\"Type a message...\"\n                  style={{ flex: 1, padding: '0.75rem', border: '1px solid #ddd', borderRadius: '20px' }}\n                />\n                <button type=\"submit\" style={{ padding: '0.5rem 1rem', background: '#007bff', color: 'white', border: 'none', borderRadius: '20px' }}>Send</button>\n              </form>\n            </>\n          ) : (\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%' }}>\n              <p>Select a conversation to start messaging</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <style jsx>{`\n        .message-actions {\n          display: none;\n        }\n        div:hover .message-actions {\n          display: block;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default Messages;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}